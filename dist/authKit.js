!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="/dist/",t(0)}([function(e,t){"use strict";!function(e){function t(e){for(var t=document.cookie.split("; "),n=0;n<t.length;n++){var o=t[n].split("=");if(e===o[0])return unescape(o[1])}return null}function n(e,t,n,o){var r=new Date;r.setDate(r.getDate()+n),document.cookie=e+"="+escape(t)+(null===n?"":";expires="+r.toGMTString())+";domain="+o}function o(e){var t=e.className;return t instanceof Object&&(t=t.baseVal||""),t}function r(e,t){k&&!/svg$/.test(e.namespaceURI)?e.className=t:e.setAttribute("class",t)}function s(e,t){if(e.classList)e.classList.add(t);else{var n=" "+o(e)+" ";n.indexOf(" "+t+" ")<0&&r(e,(n+t).trim())}}function a(e,t){if(e.classList)e.classList.remove(t);else{for(var n=" "+o(e)+" ",s=" "+t+" ";n.indexOf(s)>=0;)n=n.replace(s," ");r(e,n.trim())}e.className||e.removeAttribute("class")}function i(e,t,n,o){w({method:n,address:e,body:t},o)}function u(e){throw new TypeError(e)}function c(){E=Array.prototype.slice.call(document.querySelectorAll("["+b.authKey+"]"),0),E.forEach(function(e){var t=e.getAttribute(b.authKey).trim();~I.indexOf(t)?U?a(e,"KSAuth-Bad"):e.style.display="":U?s(e,"KSAuth-Bad"):e.style.display="none"})}function d(e){"function"!=typeof e&&u("大哥! 传入的必须是一个函数!"),R.push(e)}function l(){var e=["KSAuthUserToken","KSAuthApiURL","KSAuthUserName","KSAuthLoginName"];p(),I[0]="-1",e.forEach(function(e){n(e,"",-1,".kashuo.net")}),e.forEach(function(e){n(e,"",-1,".kashuo.com")})}function f(e){var t=e.systemId,n=void 0===t?u("大哥! 关键参数 `systemId` 没有填写!"):t,o=e.userToken,r=void 0===o?u("大哥! 关键参数 `userToken` 没有填写!"):o,s=e.apiURL,a=void 0===s?u("大哥! 关键参数 `apiUrl` 没有填写!"):s,i=e.threshold,c=void 0===i?777:i,d=e.authKey,l=void 0===d?"data-ksa":d;b.systemId=n,b.userToken=r,b.apiUrl=a,b.threshold=c,b.authKey=l}function p(){E.forEach(function(e){U?a(e,"KSAuth-Bad"):e.style.display=""}),clearInterval(O)}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(t&&f(t),c(),O=setInterval(c,b.threshold),"-1"===I[0]){var n="?systemId="+b.systemId+"&userToken="+encodeURIComponent(b.userToken);i(b.apiUrl+n,null,"GET",function(t){var n=e.JSON.parse(t),o=n.data,r=o.permission,s=o.system_infos;r.push("@authDisable"),I=r,N=s,sessionStorage.setItem("KSAuthSysList",e.JSON.stringify(y())),R.forEach(function(e){return e(I)})})}}function m(){return I}function y(){return N.filter(function(e){var t=e.sys_id;return t!==b.systemId})}function v(){return N}function g(){return t(x.userName)}function A(){return t(x.userToken)}function S(){return t(x.apiUrl)}var K="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),T=K&&window.navigator.userAgent.toLowerCase(),k=T&&T.indexOf("msie 9.0")>0,U=function(){var e=document.documentMode;return!e||e>10}(),w=window.XDomainRequest?function(e,t){var n=new XDomainRequest,o=function(e){var o=e.type;"load"===o&&t(n.responseText)};n.open(e.method,e.address),n.onload=o,n.onabort=o,n.onerror=o,n.ontimeout=o,n.onprogress=function(){},n.send(e.body)}:function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){n.readyState===n.DONE&&200===n.status&&t(n.responseText)},n.open(e.method,e.address),n.setRequestHeader("Accept","application/json, text/plain, */*"),n.setRequestHeader("Content-Type","application/json"),n.send(e.body)},L="1.0.2",x={apiUrl:"KSAuthApiURL",userToken:"KSAuthUserToken",userName:"KSAuthUserName"},b={systemId:"",userToken:"",apiUrl:"http://localhost/",authKey:"data-ksa",threshold:777},I=["-1"],N=[],E=[],R=[],O=-1;e.addEventListener("load",function(){var e=document.createElement("STYLE");e.type="text/css",e.innerText=".KSAuth-Bad {-webkit-filter: grayscale(100%);-moz-filter: grayscale(100%);-ms-filter: grayscale(100%);-o-filter: grayscale(100%);filter: grayscale(100%);filter: gray;pointer-events:none;opacity: .3;}",document.head.appendChild(e)}),e.KSAuthKit={VERSION:L,ready:d,destroy:l,off:p,on:h,config:f,setDefaultsConfig:f,getAuthMapper:m,getSystemList:y,getAllSystemList:v,getUserName:g,getUserToken:A,getApiURL:S}}(window)}]);